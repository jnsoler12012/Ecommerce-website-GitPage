"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("event-from");function o(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(o){if("default"!==o){var c=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,c.get?c:{enumerable:!0,get:function(){return e[o]}})}})),t.default=e,Object.freeze(t)}var c=o(e);const a=({tagName:e,type:t})=>"SELECT"!==e&&("INPUT"!==e||"checkbox"!==t&&"radio"!==t),r=({tagName:e,type:t})=>["BUTTON","SELECT"].includes(e)||"INPUT"===e&&["checkbox","radio","submit"].includes(t),s=({tagName:e})=>["BUTTON","INPUT","SELECT","TEXTAREA","FIELDSET"].includes(e),n=e=>"string"==typeof e||"object"==typeof e&&null!==e||"number"==typeof e||"bigint"==typeof e?String(e):"";let i=!1;const u=()=>{i=!0,window.setTimeout((()=>{i&&(document.body.style.userSelect="",document.body.style.webkitUserSelect="")}),250)},l={hover:!1,active:!1,focus:!1},v={mouseover:"onMouseOver",mouseleave:"onMouseLeave",mousedown:"onMouseDown",mouseup:"onMouseUp",pointerover:"onPointerOver",pointerleave:"onPointerLeave",pointerdown:"onPointerDown",pointerup:"onPointerUp",pointercancel:"onPointerCancel",touchstart:"onTouchStart",touchend:"onTouchEnd",touchcancel:"onTouchCancel",keydown:"onKeyDown",keyup:"onKeyUp",focus:"onFocus",blur:"onBlur",dragstart:"onDragStart",dragend:"onDragEnd"},y=Object.values(v),f=c.forwardRef((function({as:e,children:o,onStateChange:f,disabled:m=!1,useExtendedTouchActive:p=!1,hoverClassName:d="hover",activeClassName:b="active",mouseActiveClassName:h="mouseActive",touchActiveClassName:S="touchActive",keyActiveClassName:k="keyActive",focusClassName:g="focus",focusFromKeyClassName:w="focusFromKey",focusFromMouseClassName:A="focusFromMouse",focusFromTouchClassName:C="focusFromTouch",disabledClassName:K="disabled",hoverStyle:T,activeStyle:E,mouseActiveStyle:N,touchActiveStyle:D,keyActiveStyle:F,focusStyle:O,focusFromKeyStyle:j,focusFromMouseStyle:x,focusFromTouchStyle:P,disabledStyle:U,...M},I){const R=e||"button",[L,B]=c.useState({state:l,prevState:l}),_="touchActive"===L.state.active;c.useEffect((()=>{f&&f(L)}),[L.state.hover,L.state.active,L.state.focus]);const q=c.useRef(!1);q.current=m&&"string"!=typeof R;const[,X]=c.useState(!1),$=c.useRef(null),z=c.useCallback((e=>{$.current=e,"function"==typeof I?I(e):I&&(I.current=e),q.current&&X((e=>!e))}),[I]),G=c.useRef({enterKeyDown:!1,spaceKeyDown:!1}),H=c.useRef({isDragging:!1}),J=c.useCallback(((...e)=>{B((t=>{const o={...t.state};e.forEach((({iStateKey:e,state:c,action:a})=>{"enter"===a?o[e]=c:"exit"!==a||t.state[e]!==c||H.current.isDragging&&"active"===e||(o[e]=!1)}));const c={state:o,prevState:t.state};return(({state:e,prevState:t})=>e.hover!==t.hover||e.active!==t.active||e.focus!==t.focus)(c)?c:t}))}),[]),Q=c.useCallback((()=>{G.current.enterKeyDown=!1,G.current.spaceKeyDown=!1,J({iStateKey:"focus",state:!1,action:"enter"},{iStateKey:"active",state:"keyActive",action:"exit"})}),[J]);c.useEffect((()=>{m&&L.state.focus&&(s($.current||{})||"string"==typeof R)&&($.current&&"function"==typeof $.current.blur&&$.current.blur(),Q())}),[m,L.state.focus,Q,R]);const V=c.useCallback((e=>{switch(e.type){case"focus":e.target===$.current&&J({iStateKey:"focus",state:`focusFrom${t.eventFrom(e).replace(/^\w/,(e=>e.toUpperCase()))}`,action:"enter"});break;case"blur":Q();break;case"keydown":case"keyup":if(" "===e.key)G.current.spaceKeyDown="keydown"===e.type;else{if("Enter"!==e.key)break;G.current.enterKeyDown="keydown"===e.type}J({iStateKey:"active",state:"keyActive",action:G.current.enterKeyDown&&a($.current||{})||G.current.spaceKeyDown&&r($.current||{})?"enter":"exit"});break;case"dragstart":H.current.isDragging=!0,J({iStateKey:"active",state:`${t.eventFrom(e)}Active`,action:"enter"});break;case"dragend":H.current.isDragging=!1,J({iStateKey:"active",state:!1,action:"enter"});break;default:switch(t.eventFrom(e)){case"mouse":switch(e.type){case"mouseover":case"pointerover":J({iStateKey:"hover",state:!0,action:"enter"});break;case"mouseleave":case"pointerleave":case"pointercancel":J({iStateKey:"hover",state:!1,action:"enter"},{iStateKey:"active",state:"mouseActive",action:"exit"});break;case"mousedown":case"pointerdown":J({iStateKey:"active",state:"mouseActive",action:"enter"});break;case"mouseup":case"pointerup":J({iStateKey:"active",state:"mouseActive",action:"exit"})}break;case"touch":switch(e.type){case"touchstart":case"pointerdown":J({iStateKey:"active",state:"touchActive",action:"enter"});break;case"touchend":case"touchcancel":case"pointerup":case"pointercancel":case"mouseover":p&&!["touchend","touchcancel"].includes(e.type)||J({iStateKey:"active",state:"touchActive",action:"exit"});break;case"mouseleave":J({iStateKey:"hover",state:!1,action:"enter"},{iStateKey:"active",state:"mouseActive",action:"exit"})}}}M[v[e.type]]&&M[v[e.type]](e)}),[...y.map((e=>M[e])),p,J,Q]),W={};y.forEach((e=>{W[e]=V}));const Y=c.useRef(void 0);c.useEffect((()=>{if(_&&!p)return Y.current=window.setTimeout((()=>{J({iStateKey:"active",state:"touchActive",action:"exit"})}),750),()=>window.clearTimeout(Y.current)}),[_,p,J]),c.useEffect((()=>{if(_&&p)return i=!1,document.body.style.userSelect="none",document.body.style.webkitUserSelect="none",u}),[_,p]);let Z=n(M.className);const ee={};!m&&(({tagName:e,type:t},o)=>["BUTTON","A","AREA","SELECT"].includes(e)||"INPUT"===e&&["checkbox","radio","submit"].includes(t)||"INPUT"!==e&&"TEXTAREA"!==e&&o)($.current||{},Boolean(M.onClick||M.onClickCapture))&&(ee.cursor="pointer"),Object.assign(ee,M.style);const te=(e,t)=>{Z=[Z,n(e)].filter((e=>e)).join(" "),Object.assign(ee,t)};if(m)te(K,U);else{if(L.state.hover&&te(d,T),L.state.active)switch(te(b,E),L.state.active){case"mouseActive":te(h,N);break;case"touchActive":te(S,D);break;case"keyActive":te(k,F)}if(L.state.focus)switch(te(g,O),L.state.focus){case"focusFromMouse":te(A,x);break;case"focusFromTouch":te(C,P);break;case"focusFromKey":te(w,j)}}const oe=c.useMemo((()=>ee),[Object.entries(ee).join()]);let ce=null;return m&&(ce={onClick:void 0,onClickCapture:void 0,onDoubleClick:void 0,onDoubleClickCapture:void 0,tabIndex:void 0,href:void 0},s("string"==typeof R?{tagName:R.toUpperCase()}:$.current||{})&&(ce.disabled=!0)),c.createElement(R,Object.assign({},M,W,ce,{className:""===Z?void 0:Z,style:oe,ref:z}),"function"==typeof o?o(L.state):o)})),m=Object.assign(c.memo(f),{Button:c.memo(f),A:p("a"),Input:p("input"),Select:p("select"),Div:p("div"),Span:p("span")});function p(e){return c.forwardRef((function(t,o){return c.createElement(m,Object.assign({},t,{as:e,ref:o}))}))}Object.defineProperty(exports,"eventFrom",{enumerable:!0,get:function(){return t.eventFrom}}),Object.defineProperty(exports,"setEventFrom",{enumerable:!0,get:function(){return t.setEventFrom}}),exports.Interactive=m,exports.createInteractive=p;
//# sourceMappingURL=react-interactive.cjs.production.js.map
